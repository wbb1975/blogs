# Kubernetes 自动扩展（Kubernetes Autoscaling）
## 介绍
自动扩展是 Kubernetes 平台最具吸引力的特性之一。一旦正确配置，它可以节省管理员大量时间，防止性能瓶颈的出现，并帮助防止浪费金钱。但是，设置自动扩展需要了解众多配置参数，这些甚至会使得资深 Kubernetes 管理员感到混淆--这就是我们创建这篇文章详细解释自动扩展的原因。我们将致力于每种自动扩展一篇文章，解释其方法并包括配置指令以及示例 YAML 文件。
### Kubernetes 自动扩展的三个维度
自动扩展终结了持续手动调节配置以匹配变化的应用负载级别的需求。Kubernetes 可以通过不同方式实现自动扩展：调整 pod 能力（垂直自动扩展），调整 pod 数目（水平自动扩展），以及/或增减节点数目（集群自动扩展）。

有两种类型的 pod 自动扩展器（autoscalers）：垂直 pod 自动扩展器（VPA）可以增减分配给每个 pod 的 CPU 以及 memory，另一方面水平 pod 自动扩展器（HPA）可以复制或终止 pod，从而影响整体 pod 数目。集群自动扩展器（Cluster Autoscaler (CA)）增减集群的专用节点数来提供何时数量的计算资源以满足期待的工作负载，因此 CA 是影响集群的整体能力的。组合起来，三个维度的自动扩展可以帮组在防止性能瓶颈或服务中断（outage）以及资源浪费自建维持一个平衡。

![为什么要自动扩展](images/why-autoscale.png)

大多数应用的负载会有由用户活动驱动的每天，每周或季节性的韵律性变化。这个变化可能导致：由资源限制引起的应用性能下降，或者由于资源闲置所导致的不必要开销。

例如，我们经常说企业产品应用的高峰时段是一个时区的上午中段以及下午中段，那个时间雇员们大都坐在桌边，可能还在憧憬周末或假期的闲暇时光。有些企业金融应用在每个季度末金融报告发布后是最活跃的。相反，某些薪资管理程序一个月中通常有两次忙碌以发放薪水；批处理应用通常被安排在午夜后运行。也有季节性交通模式，例如黑色星期五或母亲节的在线零售。其它活跃性增加可能来自于一次性事件，例如新网站的大量访问。
### 度量与分配（Measurement and allocation）
## VPA
## HPA
## CA

## Reference
- [Kubernetes Autoscaling](https://www.kubecost.com/kubernetes-autoscaling)