## 17 | 数据关联：不同的关联形式与实现机制该怎么选？

在上一讲，我们学习了 Spark SQL 支持的诸多算子。其中数据关联（Join）是数据分析场景中最常见、最重要的操作。毫不夸张地说，几乎在所有的数据应用中，你都能看到数据关联的“身影”。因此，今天这一讲，咱们继续详细说一说 Spark SQL 对于 Join 的支持。

众所周知，Join 的种类非常丰富。如果按照关联形式（Join Types）来划分，数据关联分为内关联、外关联、左关联、右关联，等等。对于参与关联计算的两张表，关联形式决定了结果集的数据来源。因此，在开发过程中选择哪种关联形式，是由我们的业务逻辑决定的。

而从实现机制的角度，Join 又可以分为 NLJ（Nested Loop Join）、SMJ（Sort Merge Join）和 HJ（Hash Join）。也就是说，同样是内关联，我们既可以采用 NLJ 来实现，也可以采用 SMJ 或是 HJ 来实现。区别在于，在不同的计算场景下，这些不同的实现机制在执行效率上有着天壤之别。因此，了解并熟悉这些机制，对咱们开发者来说至关重要。

今天，我们就分别从这两个角度，来说一说 Spark SQL 当中数据关联的来龙去脉。

### 1. 数据准备


### 2. 关联形式（Join Types）


### 3. 关联机制（Join Mechanisms）

### 4. 重点回顾


### Reference

- [17 | 数据关联：不同的关联形式与实现机制该怎么选？](https://time.geekbang.org/column/article/427470)