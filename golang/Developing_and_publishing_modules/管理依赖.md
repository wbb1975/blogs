## 管理依赖

当你的代码使用外部包，这些包（以模块形式分发）成为了依赖。随着时间流逝，你可能需要升级它们或者移除它们。 Go 提供了依赖管理工具来帮助你在与外部依赖协作的同时，保持你的 Go 应用安全。

这篇文章描述如何执行任务以管理你的代码里引入的依赖。你可以使用 Go 工具来执行大部分工作。这篇文章也描述了如何执行一些可能会有用的依赖相关任务。

### 参见

1. 如果你正在从事模块依赖相关的工作，看看[入门指南](https://go.dev/doc/tutorial/getting-started)以获得一个简单介绍。
2. 使用 go 命令管理依赖帮助确保你的需求保持一致，以及你的 `go.mod` 文件内容有效。关于这些命令的引用，参见 [Go 命令](https://go.dev/cmd/go/)。你也可以从命令行上输入 `go help command-name` 来得到帮助， 例如 `go help mod tidy`。
3. 你使用的使依赖改变的 Go 命令将编辑你的 `go.mod` 文件。关于该文件内容的更多信息，参见 [go.mod 文件参考](https://go.dev/doc/modules/gomod-ref)
4. 是你的编辑器或 IDE 识别 Go 模块能够使得管理它们的工作变得容易。关于更多支持 Go 的编辑器，请参见[编辑器插件及IDEs](https://go.dev/doc/editors.html)。
5. 本文不描述如何如何开发，发布，模块版本化以供他人使用。更多信息，请参见[开发和发布模块](https://go.dev/doc/modules/developing)。

### 使用和管理依赖工作流

你可以使用 Go 工具来获取并使用有用的包。在 [pkg.go.dev](https://pkg.go.dev/)，你可以搜寻有用的包，然后使用 go 命令将这些包导入你的代码以调用其功能。

下面列出了大部分常见依赖管理的步骤，对每一步如想了解更多，参见本文相关小节。

1. 从[pkg.go.dev](https://pkg.go.dev/)[定位有用的包](https://go.dev/doc/modules/managing-dependencies#locating_packages)。
2. [导入包](https://go.dev/doc/modules/managing-dependencies#locating_packages)，将你想要的包导入你的代码。
3. 将你的代码加入一个模块以追踪依赖（如果它还没有在一个模块中）。参见[开启依赖追踪](https://go.dev/doc/modules/managing-dependencies#enable_tracking)。
4. [添加外部模块作为依赖](https://go.dev/doc/modules/managing-dependencies#adding_dependency)，如此你可以管理它们。
5. 随时间必要时[升级或降级你的依赖版本](https://go.dev/doc/modules/managing-dependencies#upgrading)。

### 以模块方式管理依赖

在 Go 中，你以模块的方式管理依赖，模块包含你导入的包。这个过程由下面这些设施支持：

- **一个去中心化发布模块及检索其代码的系统**。开发者使得模块对其他开发者从他们（模块开发者）自己的仓库可用，并以特定版本发布。
- **一个包搜索引擎**及文档浏览器（`pkg.go.dev`），在那里你可以找到模块。参见[定位并导入有用的包](https://go.dev/doc/modules/managing-dependencies#locating_packages)
- 一套模块**版本命名规范**以帮助你理解模块的稳定性及后向兼容性保证。参见[模块版本数字](https://go.dev/doc/modules/version-numbers)
- Go 工具方便你管理依赖，包括得到一个模块的源代码，升级等。参见本文相关小节以了解更多。

### 定位及导入有用的包

你可以搜寻[pkg.go.dev](https://pkg.go.dev/)以找到包含你期待功能的包。

### 在你的代码中开启依赖追踪

### 命名一个模块

#### 保留模块路径前缀

### 添加依赖

### 获取特定依赖版本

### 发现可用更新

### 升级或下载依赖

### 同步你的代码依赖

### 针对未发布模块代码开发和测试

#### 从本地目录引用模块代码


#### 从你自己的仓库克隆中获取外部模块代码

### 使用仓库标识符获取一个特定提交

### 移除一个依赖


### 指定一个模块代理服务器


### Reference

- [管理依赖](https://go.dev/doc/modules/managing-dependencies)