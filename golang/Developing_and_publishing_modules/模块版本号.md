## 模块版本号

模块开发者使用模块版本数字的每一部分来表示版本稳定性及向后兼容性。对每一个新的发布，模块的发布版本号特别反映了自上次发布以来的模块修改的种类。

当你在开发使用外部模块的代码时，在你考虑升级时你可以使用版本号来理解外部模块的稳定性。当你在开发自己的模块时，你的版本号将向其他开发者表示你的模块的稳定性和向后兼容性。

本文描述模块版本数字意味着什么。

请参见：

- 当你在你的代码中使用外部包，你能够利用 Go 工具来管理这些依赖。更多信息，请参见[管理依赖](https://go.dev/doc/modules/managing-dependencies)
- 如果你在开发一个供他人使用的模块，当你发布模块时，你在仓库在为你的模块打上标签，并形成模块版本号。更多信息，请参见[发布一个模块](https://go.dev/doc/modules/publishing)。

一个发布的模块带一个版本号发布，他遵循语义版本模型，如下所示：

![版本号](images/version-number.png)

下表描述了一个版本号的不同部分如何表示一个模块的稳定性及向后兼容性：

版本阶段|示例|向开发者传达的信息
-------|--------|--------
[开发中](https://go.dev/doc/modules/version-numbers#in-development)|自动伪版本号 v**0**.x.x|表示模块仍**处于开发阶段且不稳定**。该发布不带有任何稳定性和兼容性保证
[主版本](https://go.dev/doc/modules/version-numbers#major)|v**1**.x.x|表示**不兼容的公共 API 修改**。该发布可能带有与之前主版本不兼容的修改
[次版本](https://go.dev/doc/modules/version-numbers#minor)|vx.**4**.x|表示**后向兼容的公共 API 修改**。该发布保证后向兼容性及稳定性。
[补丁版本](https://go.dev/doc/modules/version-numbers#patch)|vx.x.**1**|表示修改**不影响公共 API**及其依赖。该发布保证后向兼容性及稳定性。
[预发布版本](https://go.dev/doc/modules/version-numbers#pre-release)|vx.x.x-**beta.2**|表示这是一个**预发布里程碑，例如一个 alpha 或 beta**。模块仍处于开发阶段且不稳定。该发布不保证稳定性。

### 开发中

表示模块仍处于开发阶段且不稳定。该发布不带有任何稳定性和兼容性保证。

版本号可以采用如下格式：

- **伪版本号**

```
v0.0.0-20170915032832-14c0d48ead0c
```

- **v0 number**

```
v0.x.x
```

#### 伪版本号

如果一个模块还未在仓库里打标签，Go 工具将在 `go.mod` 文件里产生一个伪版本号以备调用方使用。

> 作为最佳实践，总是允许 Go 工具 产生伪版本号而不是你自己创建。

当一个你的模块使用者需要使用一个你的特定提交二该提交还未被打标签时，伪版本号是有用的。

伪版本号以横杠分割为三个部分：

- 语法
  
  ```
  baseVersionPrefix-timestamp-revisionIdentifier
  ```

- 组成
  
  + **baseVersionPrefix (vX.0.0 or vX.Y.Z-0)** 版本之前衍生自语义版本标签的一个值；如果没有此语义标签则为 vX.0.0。
  + **timestamp (yymmddhhmmss)** 版本创建的 UTC 时间戳。在 Git 中，他为提交时间而非修改时间。
  + **revisionIdentifier (abcdefabcdef)**：12 个字符的提交哈希，或者在 `Subversion` 中为填充 0 的版本号。

#### v0 number

一个模块如果以 v0 版本号发布，则就带有与主要版本，次版本，补丁版本，以及可选的预发布识别号一致的语义版本号。

虽然一个 v0 版本可以用于产品环境，但其稳定性及后向兼容性无法保证。另外，版本 v1 允许打破与 v0 版本的兼容性。基于这个原因，开发者有责任在 v1 发布时修改客户端与 v0 不兼容的客户端调用。

### 主版本

### 次版本


### 补丁版本

### 预发布版本


### Reference

- [模块版本号](https://go.dev/doc/modules/version-numbers)
